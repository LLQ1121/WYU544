{"remainingRequest":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\src\\views\\product.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\src\\views\\product.vue","mtime":1613538940425},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQojcHJvZHVjdCB7DQogIC5zd2lwZUltZyB7DQogICAgd2lkdGg6IDEwMCU7DQogIH0NCiAgLmluZm8gew0KICAgIGRpc3BsYXk6IGZsZXg7DQogICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7DQogICAgZm9udC1zaXplOiAxMnB4Ow0KICAgIGNvbG9yOiAjOTk5Ow0KICAgIGhlaWdodDogMjRweDsNCiAgICBsaW5lLWhlaWdodDogMjRweDsNCiAgICBiYWNrZ3JvdW5kOiAjZWZlZmVlOw0KICAgIHNwYW4gew0KICAgICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIH0NCiAgICBzcGFuOjpiZWZvcmUgew0KICAgICAgY29udGVudDogIiI7DQogICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGxlZnQ6IC0xMHB4Ow0KICAgICAgdG9wOiA4cHg7DQogICAgICB3aWR0aDogNHB4Ow0KICAgICAgaGVpZ2h0OiA0cHg7DQogICAgICBib3JkZXItcmFkaXVzOiAycHg7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7DQogICAgfQ0KICB9DQogIC5pbmZvMiB7DQogICAgLm5hbWUgew0KICAgICAgZm9udC13ZWlnaHQ6IDUwMDsNCiAgICAgIHBhZGRpbmc6IDEwcHggMCA1cHg7DQogICAgfQ0KICAgIC5icmllZiB7DQogICAgICBmb250LXNpemU6IDEycHg7DQogICAgICBjb2xvcjogIzk5OTsNCiAgICAgIHBhZGRpbmc6IDNweDsNCiAgICB9DQogICAgLnByaWNlIHsNCiAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICAgIGNvbG9yOiByZWQ7DQogICAgICBwYWRkaW5nOiA1cHg7DQogICAgfQ0KICB9DQogIC52YW4tY2VsbF9fdGl0bGUgew0KICAgIHRleHQtYWxpZ246IGxlZnQ7DQogIH0NCiAgLnByb1BhcmFtcyB7DQogICAgcGFkZGluZy1ib3R0b206IDIwcHg7DQogICAgaDMgew0KICAgICAgcGFkZGluZzogMTBweCAwOw0KICAgIH0NCiAgICAucHJvSXRlbSB7DQogICAgICB3aWR0aDogOTAlOw0KICAgICAgbWFyZ2luOiAwIGF1dG87DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgaGVpZ2h0OiAyNHB4Ow0KICAgICAgY29sb3I6ICM5OTk7DQogICAgICBmb250LXNpemU6IDEycHg7DQogICAgICBiYWNrZ3JvdW5kOiAjZWZlZmVmOw0KICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7DQogICAgICB0ZXh0LWFsaWduOiBsZWZ0Ow0KICAgICAgLm5hbWUgew0KICAgICAgICB3aWR0aDogNDVweDsNCiAgICAgICAgcGFkZGluZzogMCAxMHB4Ow0KICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgfQ0KICAgICAgLnZhbHVlIHsNCiAgICAgICAgd2lkdGg6IDI2MHB4Ow0KICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsNCiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLnByb0RldGFpbCB7DQogICAgd2lkdGg6IDEwMCU7DQogICAgaW1nIHsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgIH0NCiAgICBwIHsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDA7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"product\">\r\n    <van-nav-bar\r\n      title=\"商品\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n    />\r\n\r\n    <van-swipe :autoplay=\"3000\">\r\n      <van-swipe-item v-for=\"(image, index) in images\" :key=\"index\">\r\n        <img class=\"swipeImg\" v-lazy=\"image.img_url\" />\r\n      </van-swipe-item>\r\n    </van-swipe>\r\n\r\n    <div class=\"info\">\r\n      <span>30天无忧退货</span>\r\n      <span>48小时极速退款</span>\r\n      <span>满88免邮费</span>\r\n    </div>\r\n\r\n    <div class=\"info2\">\r\n      <h3 class=\"name\">{{ info.name }}</h3>\r\n      <p class=\"brief\">{{ info.goods_brief }}</p>\r\n      <p class=\"price\">￥{{ info.retail_price }}</p>\r\n    </div>\r\n\r\n    <van-cell title=\"请选择规格数量\" is-link />\r\n\r\n    <div class=\"proParams\">\r\n      <h3>商品参数</h3>\r\n      <div class=\"proItem\" v-for=\"(item, index) in attribute\" :key=\"index\">\r\n        <span class=\"name\">{{ item.name }}</span>\r\n        <span class=\"value\">{{ item.value }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"proDetail\" v-html=\"info.goods_desc\"></div>\r\n\r\n    <van-goods-action>\r\n      <van-goods-action-icon to=\"/buycart\" :info=\"$store.state.cartTotal.goodsCount==0?'':$store.state.cartTotal.goodsCount\" icon=\"cart-o\" text=\"购物车\" />\r\n      <van-goods-action-icon icon=\"star\" text=\"已收藏\" color=\"#ff5000\" />\r\n      <van-goods-action-button @click=\"chooseSku\" type=\"warning\" text=\"加入购物车\"/>\r\n      <van-goods-action-button type=\"danger\" text=\"立即购买\" />\r\n    </van-goods-action>\r\n    <!-- 商品规格 -->\r\n    <van-sku\r\n      v-model=\"showSku\"\r\n      :sku=\"sku\"\r\n      :goods=\"goods\"\r\n      @buy-clicked=\"onBuyClicked\"\r\n      @add-cart=\"onAddCartClicked\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport api from \"../assets/config/api.js\";\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      data: {},\r\n      info: {},\r\n      attribute: {},\r\n      showSku: false,\r\n      sku: {\r\n        // 所有sku规格类目与其值的从属关系，比如商品有颜色和尺码两大类规格，颜色下面又有红色和蓝色两个规格值。\r\n        // 可以理解为一个商品可以有多个规格类目，一个规格类目下可以有多个规格值。\r\n        tree: [\r\n          {\r\n            k: \"颜色\", // skuKeyName：规格类目名称\r\n            k_s: \"s1\", // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n            v: [\r\n              {\r\n                id: \"1\", // skuValueId：规格值 id\r\n                name: \"\", // skuValueName：规格值名称\r\n              },\r\n              {\r\n                id: \"2\",\r\n                name: \"\",\r\n              },\r\n            ],\r\n            largeImageMode: true, //  是否展示大图模式\r\n          },\r\n        ],\r\n        list: [\r\n          {\r\n            id: 2259, // skuId\r\n            's-1': \"1\", // 规格类目 k_s 为 s1 的对应规格值 id\r\n            's-2': \"3\", // 规格类目 k_s 为 s2 的对应规格值 id\r\n            price: 100, // 价格（单位分）\r\n            stock_num: 110, // 当前 sku 组合对应的库存\r\n          },\r\n          {\r\n            id: 2259, // skuId\r\n            's-1': \"2\", // 规格类目 k_s 为 s1 的对应规格值 id\r\n            's-2': \"4\", // 规格类目 k_s 为 s2 的对应规格值 id\r\n            price: 100, // 价格（单位分）\r\n            stock_num: 120, // 当前 sku 组合对应的库存\r\n          },\r\n        ],\r\n        // 所有 sku 的组合列表，比如红色、M 码为一个 sku 组合，红色、S 码为另一个组合\r\n        price: \"1.00\", // 默认价格（单位元）\r\n        stock_num: 260, // 商品总库存\r\n      },\r\n      goods: {\r\n        // 默认商品 sku 缩略图\r\n        picture: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft: function () {\r\n      this.$router.go(-1);\r\n    },\r\n    onBuyClicked: function () {},\r\n    async onAddCartClicked(skuData) {\r\n      this.showSku = false;\r\n      // console.log(skuDate)\r\n      let chooseContent = skuData.selectedSkuComb['s-1']+'_'+skuData.selectedSkuComb['s-2']\r\n      // console.log(chooseContent)\r\n      let resultPro = this.data.productList.filter((item,index) =>{\r\n        if(item.goods_specification_ids == chooseContent){\r\n          return true\r\n        }else{\r\n          return false\r\n        }\r\n      })\r\n      // console.log(resultPro)\r\n      let cartRes = await axios.post(api.CartAdd,{ goodsId:resultPro[0].goods_id , number: skuData.selectedNum, productId: resultPro[0].id })\r\n      // console.log(cartRes.data)\r\n      this.$store.commit('setCartList',cartRes.data.data.cartList),\r\n      this.$store.commit('setCartTotal',cartRes.data.data.cartTotal)\r\n    },\r\n    chooseSku: function () {\r\n      this.showSku = true;\r\n    },\r\n  },\r\n  computed: {\r\n    images: function () {\r\n      if (this.data.gallery == undefined) {\r\n        return [];\r\n      } else {\r\n        return this.data.gallery;\r\n      }\r\n    },\r\n  },\r\n  async created() {\r\n    this.$store.dispatch('AjaxCart');\r\n    let res = await axios.get(api.GoodsDetail, { params: { id: this.id } });\r\n    this.data = res.data.data;\r\n    // console.log(this.data);\r\n    this.info = this.data.info;\r\n    this.attribute = this.data.attribute;\r\n    this.goods.picture = this.info.primary_pic_url;\r\n    this.sku.price = this.info.retail_price;\r\n    this.sku.stock_num = this.info.goods_number;\r\n    let tree = [];\r\n\r\n    this.data.specificationList.forEach((item, index) => {\r\n      let arr = [];\r\n      item.valueList.forEach((product, i) => {\r\n        arr.push({\r\n          id: product.id,\r\n          name: product.value,\r\n        });\r\n      });\r\n      tree.push({\r\n          k: item.name,\r\n          v: arr,\r\n          k_s: \"s-\" + item.specification_id,\r\n        });\r\n    });\r\n    this.sku.tree = tree;\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n#product {\r\n  .swipeImg {\r\n    width: 100%;\r\n  }\r\n  .info {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    font-size: 12px;\r\n    color: #999;\r\n    height: 24px;\r\n    line-height: 24px;\r\n    background: #efefee;\r\n    span {\r\n      position: relative;\r\n    }\r\n    span::before {\r\n      content: \"\";\r\n      display: block;\r\n      position: absolute;\r\n      left: -10px;\r\n      top: 8px;\r\n      width: 4px;\r\n      height: 4px;\r\n      border-radius: 2px;\r\n      border: 1px solid red;\r\n    }\r\n  }\r\n  .info2 {\r\n    .name {\r\n      font-weight: 500;\r\n      padding: 10px 0 5px;\r\n    }\r\n    .brief {\r\n      font-size: 12px;\r\n      color: #999;\r\n      padding: 3px;\r\n    }\r\n    .price {\r\n      font-size: 16px;\r\n      color: red;\r\n      padding: 5px;\r\n    }\r\n  }\r\n  .van-cell__title {\r\n    text-align: left;\r\n  }\r\n  .proParams {\r\n    padding-bottom: 20px;\r\n    h3 {\r\n      padding: 10px 0;\r\n    }\r\n    .proItem {\r\n      width: 90%;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      height: 24px;\r\n      color: #999;\r\n      font-size: 12px;\r\n      background: #efefef;\r\n      line-height: 24px;\r\n      text-align: left;\r\n      .name {\r\n        width: 45px;\r\n        padding: 0 10px;\r\n        border-right: 1px solid #ccc;\r\n      }\r\n      .value {\r\n        width: 260px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n      }\r\n    }\r\n  }\r\n  .proDetail {\r\n    width: 100%;\r\n    img {\r\n      width: 100%;\r\n    }\r\n    p {\r\n      margin: 0;\r\n      padding: 0;\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}