{"remainingRequest":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\src\\views\\product.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\src\\views\\product.vue","mtime":1613538940425},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\11210\\Desktop\\projects\\商城\\mall\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IGFwaSBmcm9tICIuLi9hc3NldHMvY29uZmlnL2FwaS5qcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIHByb3BzOiBbImlkIl0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGRhdGE6IHt9LA0KICAgICAgaW5mbzoge30sDQogICAgICBhdHRyaWJ1dGU6IHt9LA0KICAgICAgc2hvd1NrdTogZmFsc2UsDQogICAgICBza3U6IHsNCiAgICAgICAgLy8g5omA5pyJc2t16KeE5qC857G755uu5LiO5YW25YC855qE5LuO5bGe5YWz57O777yM5q+U5aaC5ZWG5ZOB5pyJ6aKc6Imy5ZKM5bC656CB5Lik5aSn57G76KeE5qC877yM6aKc6Imy5LiL6Z2i5Y+I5pyJ57qi6Imy5ZKM6JOd6Imy5Lik5Liq6KeE5qC85YC844CCDQogICAgICAgIC8vIOWPr+S7peeQhuino+S4uuS4gOS4quWVhuWTgeWPr+S7peacieWkmuS4quinhOagvOexu+ebru+8jOS4gOS4quinhOagvOexu+ebruS4i+WPr+S7peacieWkmuS4quinhOagvOWAvOOAgg0KICAgICAgICB0cmVlOiBbDQogICAgICAgICAgew0KICAgICAgICAgICAgazogIuminOiJsiIsIC8vIHNrdUtleU5hbWXvvJrop4TmoLznsbvnm67lkI3np7ANCiAgICAgICAgICAgIGtfczogInMxIiwgLy8gc2t1S2V5U3Ry77yac2t1IOe7hOWQiOWIl+ihqO+8iOS4i+aWuSBsaXN077yJ5Lit5b2T5YmN57G755uu5a+55bqU55qEIGtleSDlgLzvvIx2YWx1ZSDlgLzkvJrmmK/ku47lsZ7kuo7lvZPliY3nsbvnm67nmoTkuIDkuKrop4TmoLzlgLwgaWQNCiAgICAgICAgICAgIHY6IFsNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGlkOiAiMSIsIC8vIHNrdVZhbHVlSWTvvJrop4TmoLzlgLwgaWQNCiAgICAgICAgICAgICAgICBuYW1lOiAiIiwgLy8gc2t1VmFsdWVOYW1l77ya6KeE5qC85YC85ZCN56ewDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZDogIjIiLA0KICAgICAgICAgICAgICAgIG5hbWU6ICIiLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgXSwNCiAgICAgICAgICAgIGxhcmdlSW1hZ2VNb2RlOiB0cnVlLCAvLyAg5piv5ZCm5bGV56S65aSn5Zu+5qih5byPDQogICAgICAgICAgfSwNCiAgICAgICAgXSwNCiAgICAgICAgbGlzdDogWw0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGlkOiAyMjU5LCAvLyBza3VJZA0KICAgICAgICAgICAgJ3MtMSc6ICIxIiwgLy8g6KeE5qC857G755uuIGtfcyDkuLogczEg55qE5a+55bqU6KeE5qC85YC8IGlkDQogICAgICAgICAgICAncy0yJzogIjMiLCAvLyDop4TmoLznsbvnm64ga19zIOS4uiBzMiDnmoTlr7nlupTop4TmoLzlgLwgaWQNCiAgICAgICAgICAgIHByaWNlOiAxMDAsIC8vIOS7t+agvO+8iOWNleS9jeWIhu+8iQ0KICAgICAgICAgICAgc3RvY2tfbnVtOiAxMTAsIC8vIOW9k+WJjSBza3Ug57uE5ZCI5a+55bqU55qE5bqT5a2YDQogICAgICAgICAgfSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBpZDogMjI1OSwgLy8gc2t1SWQNCiAgICAgICAgICAgICdzLTEnOiAiMiIsIC8vIOinhOagvOexu+ebriBrX3Mg5Li6IHMxIOeahOWvueW6lOinhOagvOWAvCBpZA0KICAgICAgICAgICAgJ3MtMic6ICI0IiwgLy8g6KeE5qC857G755uuIGtfcyDkuLogczIg55qE5a+55bqU6KeE5qC85YC8IGlkDQogICAgICAgICAgICBwcmljZTogMTAwLCAvLyDku7fmoLzvvIjljZXkvY3liIbvvIkNCiAgICAgICAgICAgIHN0b2NrX251bTogMTIwLCAvLyDlvZPliY0gc2t1IOe7hOWQiOWvueW6lOeahOW6k+WtmA0KICAgICAgICAgIH0sDQogICAgICAgIF0sDQogICAgICAgIC8vIOaJgOaciSBza3Ug55qE57uE5ZCI5YiX6KGo77yM5q+U5aaC57qi6Imy44CBTSDnoIHkuLrkuIDkuKogc2t1IOe7hOWQiO+8jOe6ouiJsuOAgVMg56CB5Li65Y+m5LiA5Liq57uE5ZCIDQogICAgICAgIHByaWNlOiAiMS4wMCIsIC8vIOm7mOiupOS7t+agvO+8iOWNleS9jeWFg++8iQ0KICAgICAgICBzdG9ja19udW06IDI2MCwgLy8g5ZWG5ZOB5oC75bqT5a2YDQogICAgICB9LA0KICAgICAgZ29vZHM6IHsNCiAgICAgICAgLy8g6buY6K6k5ZWG5ZOBIHNrdSDnvKnnlaXlm74NCiAgICAgICAgcGljdHVyZTogIiIsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvbkNsaWNrTGVmdDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsNCiAgICB9LA0KICAgIG9uQnV5Q2xpY2tlZDogZnVuY3Rpb24gKCkge30sDQogICAgYXN5bmMgb25BZGRDYXJ0Q2xpY2tlZChza3VEYXRhKSB7DQogICAgICB0aGlzLnNob3dTa3UgPSBmYWxzZTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHNrdURhdGUpDQogICAgICBsZXQgY2hvb3NlQ29udGVudCA9IHNrdURhdGEuc2VsZWN0ZWRTa3VDb21iWydzLTEnXSsnXycrc2t1RGF0YS5zZWxlY3RlZFNrdUNvbWJbJ3MtMiddDQogICAgICAvLyBjb25zb2xlLmxvZyhjaG9vc2VDb250ZW50KQ0KICAgICAgbGV0IHJlc3VsdFBybyA9IHRoaXMuZGF0YS5wcm9kdWN0TGlzdC5maWx0ZXIoKGl0ZW0saW5kZXgpID0+ew0KICAgICAgICBpZihpdGVtLmdvb2RzX3NwZWNpZmljYXRpb25faWRzID09IGNob29zZUNvbnRlbnQpew0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0UHJvKQ0KICAgICAgbGV0IGNhcnRSZXMgPSBhd2FpdCBheGlvcy5wb3N0KGFwaS5DYXJ0QWRkLHsgZ29vZHNJZDpyZXN1bHRQcm9bMF0uZ29vZHNfaWQgLCBudW1iZXI6IHNrdURhdGEuc2VsZWN0ZWROdW0sIHByb2R1Y3RJZDogcmVzdWx0UHJvWzBdLmlkIH0pDQogICAgICAvLyBjb25zb2xlLmxvZyhjYXJ0UmVzLmRhdGEpDQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENhcnRMaXN0JyxjYXJ0UmVzLmRhdGEuZGF0YS5jYXJ0TGlzdCksDQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldENhcnRUb3RhbCcsY2FydFJlcy5kYXRhLmRhdGEuY2FydFRvdGFsKQ0KICAgIH0sDQogICAgY2hvb3NlU2t1OiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLnNob3dTa3UgPSB0cnVlOw0KICAgIH0sDQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgaW1hZ2VzOiBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5kYXRhLmdhbGxlcnkgPT0gdW5kZWZpbmVkKSB7DQogICAgICAgIHJldHVybiBbXTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiB0aGlzLmRhdGEuZ2FsbGVyeTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBhc3luYyBjcmVhdGVkKCkgew0KICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdBamF4Q2FydCcpOw0KICAgIGxldCByZXMgPSBhd2FpdCBheGlvcy5nZXQoYXBpLkdvb2RzRGV0YWlsLCB7IHBhcmFtczogeyBpZDogdGhpcy5pZCB9IH0pOw0KICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhKTsNCiAgICB0aGlzLmluZm8gPSB0aGlzLmRhdGEuaW5mbzsNCiAgICB0aGlzLmF0dHJpYnV0ZSA9IHRoaXMuZGF0YS5hdHRyaWJ1dGU7DQogICAgdGhpcy5nb29kcy5waWN0dXJlID0gdGhpcy5pbmZvLnByaW1hcnlfcGljX3VybDsNCiAgICB0aGlzLnNrdS5wcmljZSA9IHRoaXMuaW5mby5yZXRhaWxfcHJpY2U7DQogICAgdGhpcy5za3Uuc3RvY2tfbnVtID0gdGhpcy5pbmZvLmdvb2RzX251bWJlcjsNCiAgICBsZXQgdHJlZSA9IFtdOw0KDQogICAgdGhpcy5kYXRhLnNwZWNpZmljYXRpb25MaXN0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICBsZXQgYXJyID0gW107DQogICAgICBpdGVtLnZhbHVlTGlzdC5mb3JFYWNoKChwcm9kdWN0LCBpKSA9PiB7DQogICAgICAgIGFyci5wdXNoKHsNCiAgICAgICAgICBpZDogcHJvZHVjdC5pZCwNCiAgICAgICAgICBuYW1lOiBwcm9kdWN0LnZhbHVlLA0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgICAgdHJlZS5wdXNoKHsNCiAgICAgICAgICBrOiBpdGVtLm5hbWUsDQogICAgICAgICAgdjogYXJyLA0KICAgICAgICAgIGtfczogInMtIiArIGl0ZW0uc3BlY2lmaWNhdGlvbl9pZCwNCiAgICAgICAgfSk7DQogICAgfSk7DQogICAgdGhpcy5za3UudHJlZSA9IHRyZWU7DQogIH0sDQp9Ow0K"},{"version":3,"sources":["product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div id=\"product\">\r\n    <van-nav-bar\r\n      title=\"商品\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"onClickLeft\"\r\n    />\r\n\r\n    <van-swipe :autoplay=\"3000\">\r\n      <van-swipe-item v-for=\"(image, index) in images\" :key=\"index\">\r\n        <img class=\"swipeImg\" v-lazy=\"image.img_url\" />\r\n      </van-swipe-item>\r\n    </van-swipe>\r\n\r\n    <div class=\"info\">\r\n      <span>30天无忧退货</span>\r\n      <span>48小时极速退款</span>\r\n      <span>满88免邮费</span>\r\n    </div>\r\n\r\n    <div class=\"info2\">\r\n      <h3 class=\"name\">{{ info.name }}</h3>\r\n      <p class=\"brief\">{{ info.goods_brief }}</p>\r\n      <p class=\"price\">￥{{ info.retail_price }}</p>\r\n    </div>\r\n\r\n    <van-cell title=\"请选择规格数量\" is-link />\r\n\r\n    <div class=\"proParams\">\r\n      <h3>商品参数</h3>\r\n      <div class=\"proItem\" v-for=\"(item, index) in attribute\" :key=\"index\">\r\n        <span class=\"name\">{{ item.name }}</span>\r\n        <span class=\"value\">{{ item.value }}</span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"proDetail\" v-html=\"info.goods_desc\"></div>\r\n\r\n    <van-goods-action>\r\n      <van-goods-action-icon to=\"/buycart\" :info=\"$store.state.cartTotal.goodsCount==0?'':$store.state.cartTotal.goodsCount\" icon=\"cart-o\" text=\"购物车\" />\r\n      <van-goods-action-icon icon=\"star\" text=\"已收藏\" color=\"#ff5000\" />\r\n      <van-goods-action-button @click=\"chooseSku\" type=\"warning\" text=\"加入购物车\"/>\r\n      <van-goods-action-button type=\"danger\" text=\"立即购买\" />\r\n    </van-goods-action>\r\n    <!-- 商品规格 -->\r\n    <van-sku\r\n      v-model=\"showSku\"\r\n      :sku=\"sku\"\r\n      :goods=\"goods\"\r\n      @buy-clicked=\"onBuyClicked\"\r\n      @add-cart=\"onAddCartClicked\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport api from \"../assets/config/api.js\";\r\nexport default {\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      data: {},\r\n      info: {},\r\n      attribute: {},\r\n      showSku: false,\r\n      sku: {\r\n        // 所有sku规格类目与其值的从属关系，比如商品有颜色和尺码两大类规格，颜色下面又有红色和蓝色两个规格值。\r\n        // 可以理解为一个商品可以有多个规格类目，一个规格类目下可以有多个规格值。\r\n        tree: [\r\n          {\r\n            k: \"颜色\", // skuKeyName：规格类目名称\r\n            k_s: \"s1\", // skuKeyStr：sku 组合列表（下方 list）中当前类目对应的 key 值，value 值会是从属于当前类目的一个规格值 id\r\n            v: [\r\n              {\r\n                id: \"1\", // skuValueId：规格值 id\r\n                name: \"\", // skuValueName：规格值名称\r\n              },\r\n              {\r\n                id: \"2\",\r\n                name: \"\",\r\n              },\r\n            ],\r\n            largeImageMode: true, //  是否展示大图模式\r\n          },\r\n        ],\r\n        list: [\r\n          {\r\n            id: 2259, // skuId\r\n            's-1': \"1\", // 规格类目 k_s 为 s1 的对应规格值 id\r\n            's-2': \"3\", // 规格类目 k_s 为 s2 的对应规格值 id\r\n            price: 100, // 价格（单位分）\r\n            stock_num: 110, // 当前 sku 组合对应的库存\r\n          },\r\n          {\r\n            id: 2259, // skuId\r\n            's-1': \"2\", // 规格类目 k_s 为 s1 的对应规格值 id\r\n            's-2': \"4\", // 规格类目 k_s 为 s2 的对应规格值 id\r\n            price: 100, // 价格（单位分）\r\n            stock_num: 120, // 当前 sku 组合对应的库存\r\n          },\r\n        ],\r\n        // 所有 sku 的组合列表，比如红色、M 码为一个 sku 组合，红色、S 码为另一个组合\r\n        price: \"1.00\", // 默认价格（单位元）\r\n        stock_num: 260, // 商品总库存\r\n      },\r\n      goods: {\r\n        // 默认商品 sku 缩略图\r\n        picture: \"\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    onClickLeft: function () {\r\n      this.$router.go(-1);\r\n    },\r\n    onBuyClicked: function () {},\r\n    async onAddCartClicked(skuData) {\r\n      this.showSku = false;\r\n      // console.log(skuDate)\r\n      let chooseContent = skuData.selectedSkuComb['s-1']+'_'+skuData.selectedSkuComb['s-2']\r\n      // console.log(chooseContent)\r\n      let resultPro = this.data.productList.filter((item,index) =>{\r\n        if(item.goods_specification_ids == chooseContent){\r\n          return true\r\n        }else{\r\n          return false\r\n        }\r\n      })\r\n      // console.log(resultPro)\r\n      let cartRes = await axios.post(api.CartAdd,{ goodsId:resultPro[0].goods_id , number: skuData.selectedNum, productId: resultPro[0].id })\r\n      // console.log(cartRes.data)\r\n      this.$store.commit('setCartList',cartRes.data.data.cartList),\r\n      this.$store.commit('setCartTotal',cartRes.data.data.cartTotal)\r\n    },\r\n    chooseSku: function () {\r\n      this.showSku = true;\r\n    },\r\n  },\r\n  computed: {\r\n    images: function () {\r\n      if (this.data.gallery == undefined) {\r\n        return [];\r\n      } else {\r\n        return this.data.gallery;\r\n      }\r\n    },\r\n  },\r\n  async created() {\r\n    this.$store.dispatch('AjaxCart');\r\n    let res = await axios.get(api.GoodsDetail, { params: { id: this.id } });\r\n    this.data = res.data.data;\r\n    // console.log(this.data);\r\n    this.info = this.data.info;\r\n    this.attribute = this.data.attribute;\r\n    this.goods.picture = this.info.primary_pic_url;\r\n    this.sku.price = this.info.retail_price;\r\n    this.sku.stock_num = this.info.goods_number;\r\n    let tree = [];\r\n\r\n    this.data.specificationList.forEach((item, index) => {\r\n      let arr = [];\r\n      item.valueList.forEach((product, i) => {\r\n        arr.push({\r\n          id: product.id,\r\n          name: product.value,\r\n        });\r\n      });\r\n      tree.push({\r\n          k: item.name,\r\n          v: arr,\r\n          k_s: \"s-\" + item.specification_id,\r\n        });\r\n    });\r\n    this.sku.tree = tree;\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n#product {\r\n  .swipeImg {\r\n    width: 100%;\r\n  }\r\n  .info {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    font-size: 12px;\r\n    color: #999;\r\n    height: 24px;\r\n    line-height: 24px;\r\n    background: #efefee;\r\n    span {\r\n      position: relative;\r\n    }\r\n    span::before {\r\n      content: \"\";\r\n      display: block;\r\n      position: absolute;\r\n      left: -10px;\r\n      top: 8px;\r\n      width: 4px;\r\n      height: 4px;\r\n      border-radius: 2px;\r\n      border: 1px solid red;\r\n    }\r\n  }\r\n  .info2 {\r\n    .name {\r\n      font-weight: 500;\r\n      padding: 10px 0 5px;\r\n    }\r\n    .brief {\r\n      font-size: 12px;\r\n      color: #999;\r\n      padding: 3px;\r\n    }\r\n    .price {\r\n      font-size: 16px;\r\n      color: red;\r\n      padding: 5px;\r\n    }\r\n  }\r\n  .van-cell__title {\r\n    text-align: left;\r\n  }\r\n  .proParams {\r\n    padding-bottom: 20px;\r\n    h3 {\r\n      padding: 10px 0;\r\n    }\r\n    .proItem {\r\n      width: 90%;\r\n      margin: 0 auto;\r\n      display: flex;\r\n      justify-content: space-between;\r\n      height: 24px;\r\n      color: #999;\r\n      font-size: 12px;\r\n      background: #efefef;\r\n      line-height: 24px;\r\n      text-align: left;\r\n      .name {\r\n        width: 45px;\r\n        padding: 0 10px;\r\n        border-right: 1px solid #ccc;\r\n      }\r\n      .value {\r\n        width: 260px;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        white-space: nowrap;\r\n      }\r\n    }\r\n  }\r\n  .proDetail {\r\n    width: 100%;\r\n    img {\r\n      width: 100%;\r\n    }\r\n    p {\r\n      margin: 0;\r\n      padding: 0;\r\n      display: flex;\r\n    }\r\n  }\r\n}\r\n</style>"]}]}